---
import React from "react";
import {
    Facebook,
    Linkedin,
    Mail,
    MapPin,
    Phone,
    Download,
} from "lucide-react";

const currentYear = new Date().getFullYear();

// 1. DEFINE THE HOME BASE
// This ensures that no matter where this footer lives, it points home.
const siteUrl = "https://empowerdigitalsolutions.co.uk";
---

<footer
    class="bg-slate-900 text-white pt-16 pb-8 border-t border-slate-800 relative z-50"
>
    <div class="container mx-auto px-6">
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
            <div>
                <div class="flex items-center gap-3 mb-6">
                    <img
                        src={`${siteUrl}/images/footerlogo.jpg`}
                        alt="Empower Digital Solutions"
                        class="h-12 w-12 rounded-full border-2 border-empower-pink"
                    />
                    <span class="font-heading font-bold text-xl"
                        >Empower Digital Solutions</span
                    >
                </div>
                <p class="text-gray-400 mb-6 leading-relaxed">
                    Custom Code & Scale. We engineer bespoke digital solutions
                    that help your business grow, automate, and succeed.
                </p>
                <div class="flex gap-4 mb-6">
                    <a
                        href="https://www.linkedin.com/in/empowervaservices"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="bg-slate-800 p-2 rounded-full hover:bg-vibrant-magenta transition-colors group"
                    >
                        <Linkedin
                            className="w-5 h-5 text-gray-300 group-hover:text-white"
                        />
                    </a>
                    <a
                        href="mailto:nicola@empowerdigitalsolutions.co.uk"
                        class="bg-slate-800 p-2 rounded-full hover:bg-vibrant-magenta transition-colors group"
                    >
                        <Mail
                            className="w-5 h-5 text-gray-300 group-hover:text-white"
                        />
                    </a>
                </div>

                <button
                    id="installApp"
                    class="hidden items-center gap-2 bg-slate-800 text-gray-300 px-4 py-2 rounded-lg hover:bg-vibrant-magenta hover:text-white transition-all text-sm font-semibold group"
                >
                    <Download className="w-4 h-4" />
                    Install App
                </button>
            </div>
            <div>
                <h3 class="font-bold text-lg mb-6 text-empower-pink">
                    Quick Links
                </h3>
                <ul class="space-y-3">
                    <li>
                        <a
                            href={`${siteUrl}/`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Home</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/services`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Services</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/aesthetic-vault`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >The Aesthetic Vault</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/customwebapps`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Custom Apps</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/contact`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Contact</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/portal`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Client Portal</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/admin`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Admin Login</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/digitalplanner`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Digital Planner Case Study</a
                        >
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="font-bold text-lg mb-6 text-empower-pink">
                    Our Services
                </h3>
                <ul class="space-y-3">
                    <li>
                        <a
                            href={`${siteUrl}/web-design`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Bespoke Web Design</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/customwebapps`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Custom Web Applications</a
                        >
                    </li>

                    <li>
                        <a
                            href={`${siteUrl}/website-health-checker`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Website Health Checker</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/design-process`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Our Process</a
                        >
                    </li>
                    <li>
                        <a
                            href={`${siteUrl}/consulting`}
                            class="text-gray-400 hover:text-white transition-colors"
                            >Digital Consulting</a
                        >
                    </li>
                </ul>
            </div>

            <div>
                <h3 class="font-bold text-lg mb-6 text-empower-pink">
                    Contact Us
                </h3>
                <ul class="space-y-4">
                    <li class="flex items-start gap-3 text-gray-400">
                        <Mail
                            className="w-5 h-5 text-empower-pink mt-1 shrink-0"
                        />
                        <a
                            href="mailto:nicola@empowerdigitalsolutions.co.uk"
                            class="hover:text-white transition-colors"
                            >nicola@empowerdigitalsolutions.co.uk</a
                        >
                    </li>
                    <li class="flex items-start gap-3 text-gray-400">
                        <MapPin
                            className="w-5 h-5 text-empower-pink mt-1 shrink-0"
                        />
                        <span>Stenhousemuir, Scotland</span>
                    </li>
                </ul>
            </div>
        </div>

        <div
            class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center text-gray-500 text-sm"
        >
            <p>
                &copy; {currentYear} Empower Digital Solutions. All rights reserved.
            </p>
            <div class="flex gap-6 mt-4 md:mt-0">
                <a
                    href={`${siteUrl}/terms`}
                    class="hover:text-white transition-colors"
                    >Terms & Conditions</a
                >
                <a
                    href={`${siteUrl}/privacy`}
                    class="hover:text-white transition-colors">Privacy Policy</a
                >
            </div>
        </div>

        <script lang="ts">
            let deferredPrompt: any;
            const installButton = document.getElementById("installApp");

            if (installButton) {
                window.addEventListener("beforeinstallprompt", (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    installButton.classList.remove("hidden");
                    installButton.classList.add("flex");
                });

                installButton.addEventListener("click", (e) => {
                    installButton.classList.add("hidden");
                    installButton.classList.remove("flex");
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult: any) => {
                            if (choiceResult.outcome === "accepted") {
                                console.log("User accepted the A2HS prompt");
                            } else {
                                console.log("User dismissed the A2HS prompt");
                            }
                            deferredPrompt = null;
                        });
                    }
                });
            }
        </script>
    </div>
</footer>
