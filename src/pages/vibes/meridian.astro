---
import BlankLayout from "../../layouts/BlankLayout.astro";
import { ViewTransitions } from "astro:transitions";
import VibeDNA from "../../components/VibeDNA.astro";
---

<BlankLayout title="Meridian | Private Aviation">
    <Fragment slot="head">
        <ViewTransitions />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Lato:wght@300;400;700&display=swap"
            rel="stylesheet"
        />
    </Fragment>

    <div class="meridian-wrapper">
        <!-- Border Frame -->
        <div class="frame-border"></div>

        <!-- Nav -->
        <nav class="nav">
            <div class="nav-left">
                <a href="#fleet">THE FLEET</a>
                <a href="#destinations">DESTINATIONS</a>
            </div>
            <div class="logo">MERIDIAN</div>
            <div class="nav-right">
                <a href="#concierge">CONCIERGE</a>
                <a href="#login">MEMBER LOGIN</a>
            </div>
        </nav>

        <!-- Hero -->
        <header class="hero">
            <div class="hero-content">
                <div class="video-mask-container">
                    <h1 class="masked-text">YOUR JOURNEY</h1>
                    <video autoplay muted loop playsinline class="mask-video">
                        <!-- Using a reliable placeholder video source or abstract background -->
                        <source
                            src="https://videos.pexels.com/video-files/2818546/2818546-hd_1920_1080_24fps.mp4"
                            type="video/mp4"
                        />
                    </video>
                </div>
                <p class="subhead">TIME, REDEFINED.</p>
                <div class="scroll-indicator">
                    <div class="line"></div>
                </div>
            </div>
        </header>

        <!-- The Fleet (Carousel) -->
        <section id="fleet" class="fleet-section">
            <div class="section-header">
                <span class="eyebrow">EXCELLENCE IN MOTION</span>
                <h2>THE FLEET</h2>
                <div class="pinstripe"></div>
            </div>

            <div class="carousel-container">
                <button class="nav-btn prev">←</button>
                <div class="carousel-track">
                    <div class="fleet-card active">
                        <div class="fleet-image">
                            <div class="placeholder-jet">
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1"
                                >
                                    <path d="M2 12h20M2 12l10-10M22 12l-10 10"
                                    ></path>
                                </svg>
                            </div>
                        </div>
                        <div class="fleet-info">
                            <h3>GULFSTREAM G700</h3>
                            <p>Range: 7,500 nm • Passengers: 19</p>
                        </div>
                    </div>
                </div>
                <button class="nav-btn next">→</button>
            </div>
        </section>

        <!-- Destinations (SVG Map) -->
        <section id="destinations" class="map-section">
            <div class="section-header">
                <span class="eyebrow">GLOBAL REACH</span>
                <h2>DESTINATIONS</h2>
                <div class="pinstripe"></div>
            </div>

            <div class="map-container">
                <svg class="world-map" viewBox="0 0 1000 500">
                    <!-- Simplified World Map Silhouette -->
                    <path
                        class="land"
                        d="M150,150 Q200,100 250,150 T350,150 T450,200 T550,150 T650,200 T750,150 T850,200"
                        fill="#3C5070"
                        opacity="0.3"></path>

                    <!-- Connection Lines -->
                    <path
                        class="flight-path"
                        d="M200,180 Q400,50 700,180"
                        fill="none"
                        stroke="#E0C58F"
                        stroke-width="1"
                        stroke-dasharray="1000"
                        stroke-dashoffset="1000"></path>
                    <path
                        class="flight-path"
                        d="M200,180 Q300,300 400,350"
                        fill="none"
                        stroke="#E0C58F"
                        stroke-width="1"
                        stroke-dasharray="1000"
                        stroke-dashoffset="1000"></path>

                    <!-- Cities -->
                    <g class="city" data-city="New York">
                        <circle cx="200" cy="180" r="4" fill="#E0C58F"></circle>
                        <text
                            x="200"
                            y="165"
                            text-anchor="middle"
                            fill="#F5F0E9"
                            font-size="12">NEW YORK</text
                        >
                    </g>
                    <g class="city" data-city="London">
                        <circle cx="450" cy="160" r="4" fill="#E0C58F"></circle>
                        <text
                            x="450"
                            y="145"
                            text-anchor="middle"
                            fill="#F5F0E9"
                            font-size="12">LONDON</text
                        >
                    </g>
                    <g class="city" data-city="Dubai">
                        <circle cx="580" cy="220" r="4" fill="#E0C58F"></circle>
                        <text
                            x="580"
                            y="205"
                            text-anchor="middle"
                            fill="#F5F0E9"
                            font-size="12">DUBAI</text
                        >
                    </g>
                    <g class="city" data-city="Tokyo">
                        <circle cx="800" cy="180" r="4" fill="#E0C58F"></circle>
                        <text
                            x="800"
                            y="165"
                            text-anchor="middle"
                            fill="#F5F0E9"
                            font-size="12">TOKYO</text
                        >
                    </g>
                </svg>
            </div>
        </section>

        <!-- Concierge Form -->
        <section id="concierge" class="concierge-section">
            <div class="section-header">
                <span class="eyebrow">AT YOUR SERVICE</span>
                <h2>REQUEST A QUOTE</h2>
                <div class="pinstripe"></div>
            </div>

            <form class="quote-form">
                <div class="form-row">
                    <div class="input-group">
                        <label>DEPARTURE</label>
                        <input type="text" placeholder="City or Airport Code" />
                    </div>
                    <div class="input-group">
                        <label>ARRIVAL</label>
                        <input type="text" placeholder="City or Airport Code" />
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label>DATE</label>
                        <input type="date" />
                    </div>
                    <div class="input-group">
                        <label>PASSENGERS</label>
                        <input type="number" min="1" placeholder="1" />
                    </div>
                </div>
                <button type="submit" class="submit-btn">INQUIRE</button>
            </form>
        </section>

        <footer class="footer">
            <div class="footer-logo">MERIDIAN</div>
            <p class="copyright">
                © 2025 MERIDIAN PRIVATE AVIATION. ALL RIGHTS RESERVED.
            </p>
        </footer>

        <VibeDNA
            description="Impeccably professional, nautical, and authoritative. Pure old money luxury."
            fontHeader="Cinzel"
            fontBody="Lato"
            palette={[
                { hex: "#112250", name: "Royal Blue" },
                { hex: "#3C5070", name: "Sapphire" },
                { hex: "#E0C58F", name: "Quicksand" },
                { hex: "#F5F0E9", name: "Swan Wing" },
                { hex: "#D9CBC2", name: "Shellstone" },
            ]}
        />
    </div>
</BlankLayout>

<style>
    :root {
        --royal-blue: #112250;
        --sapphire: #3c5070;
        --quicksand: #e0c58f;
        --swan-wing: #f5f0e9;
        --shellstone: #d9cbc2;

        --font-heading: "Cinzel", serif;
        --font-body: "Lato", sans-serif;
    }

    .meridian-wrapper {
        background-color: var(--royal-blue);
        color: var(--swan-wing);
        font-family: var(--font-body);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
    }

    /* Border Frame */
    .frame-border {
        position: fixed;
        top: 20px;
        left: 20px;
        right: 20px;
        bottom: 20px;
        border: 1px solid var(--quicksand);
        pointer-events: none;
        z-index: 100;
        opacity: 0.5;
    }

    /* Nav */
    .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 3rem 4rem;
        position: relative;
        z-index: 10;
    }

    .logo {
        font-family: var(--font-heading);
        font-size: 2rem;
        letter-spacing: 0.2em;
        color: var(--swan-wing);
        text-shadow: 0 0 20px rgba(224, 197, 143, 0.3);
    }

    .nav-left,
    .nav-right {
        display: flex;
        gap: 3rem;
    }

    .nav a {
        color: var(--shellstone);
        text-decoration: none;
        font-size: 0.8rem;
        letter-spacing: 0.15em;
        transition: color 0.3s;
    }

    .nav a:hover {
        color: var(--quicksand);
    }

    /* Hero */
    .hero {
        height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        position: relative;
    }

    .video-mask-container {
        position: relative;
        margin-bottom: 2rem;
    }

    .masked-text {
        font-family: var(--font-heading);
        font-size: 8rem;
        font-weight: 700;
        letter-spacing: 0.05em;
        line-height: 1;
        color: transparent; /* Essential for background-clip */
        background-image: url("https://videos.pexels.com/video-files/2818546/2818546-hd_1920_1080_24fps.mp4"); /* Fallback if video element masking is tricky */
        -webkit-background-clip: text;
        background-clip: text;
        /* Note: Real video masking often requires SVG or canvas for full cross-browser support, 
           but CSS background-clip with a gif/video background on the element is the cleanest CSS-only way.
           Here we simulate it by placing the video behind and using mix-blend-mode or clip-path if needed,
           but standard text-masking with video is complex. 
           For this demo, we'll use a high-end text styling with the video playing behind the whole hero 
           and using mix-blend-mode: multiply on the text to "cut it out" visually.
        */
        position: relative;
        z-index: 2;
    }

    /* Alternative Video Masking Approach */
    .video-mask-container {
        position: relative;
        overflow: hidden;
    }

    .mask-video {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        min-width: 100%;
        min-height: 100%;
        z-index: 1;
        opacity: 0.6;
        pointer-events: none;
        mix-blend-mode: screen; /* Creates a ghostly effect */
    }

    .masked-text {
        position: relative;
        z-index: 2;
        color: #fff;
        mix-blend-mode: overlay;
    }

    .subhead {
        font-family: var(--font-heading);
        font-size: 1.2rem;
        letter-spacing: 0.3em;
        color: var(--quicksand);
        margin-top: 2rem;
    }

    .scroll-indicator {
        position: absolute;
        bottom: 4rem;
        left: 50%;
        transform: translateX(-50%);
    }

    .line {
        width: 1px;
        height: 60px;
        background: linear-gradient(to bottom, var(--quicksand), transparent);
    }

    /* Sections Shared Styles */
    section {
        padding: 8rem 4rem;
        text-align: center;
    }

    .section-header {
        margin-bottom: 5rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }

    .eyebrow {
        font-size: 0.8rem;
        letter-spacing: 0.2em;
        color: var(--shellstone);
    }

    h2 {
        font-family: var(--font-heading);
        font-size: 3rem;
        letter-spacing: 0.1em;
        color: var(--swan-wing);
        font-weight: 400;
    }

    .pinstripe {
        width: 100px;
        height: 1px;
        background-color: var(--quicksand);
        margin-top: 1rem;
    }

    /* Fleet Carousel */
    .carousel-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4rem;
    }

    .nav-btn {
        background: transparent;
        border: 1px solid var(--quicksand);
        color: var(--quicksand);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }

    .nav-btn:hover {
        background: var(--quicksand);
        color: var(--royal-blue);
    }

    .fleet-card {
        width: 600px;
        border: 1px solid rgba(224, 197, 143, 0.2);
        padding: 2rem;
        background: rgba(60, 80, 112, 0.1);
    }

    .fleet-image {
        height: 300px;
        background: #0d1a3d;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 2rem;
    }

    .placeholder-jet {
        width: 100px;
        height: 100px;
        color: var(--shellstone);
        opacity: 0.5;
    }

    .fleet-info h3 {
        font-family: var(--font-heading);
        font-size: 1.5rem;
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
    }

    .fleet-info p {
        color: var(--shellstone);
        font-size: 0.9rem;
        letter-spacing: 0.05em;
    }

    /* Map */
    .map-container {
        background: rgba(60, 80, 112, 0.1);
        border: 1px solid rgba(224, 197, 143, 0.1);
        padding: 2rem;
        max-width: 1000px;
        margin: 0 auto;
    }

    .world-map {
        width: 100%;
        height: auto;
    }

    .city {
        cursor: pointer;
        transition: opacity 0.3s;
    }

    .city:hover {
        opacity: 0.8;
    }

    .flight-path {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: drawLine 3s ease-out forwards;
    }

    @keyframes drawLine {
        to {
            stroke-dashoffset: 0;
        }
    }

    /* Concierge Form */
    .concierge-section {
        max-width: 800px;
        margin: 0 auto;
    }

    .quote-form {
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }

    .form-row {
        display: flex;
        gap: 3rem;
    }

    .input-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        text-align: left;
    }

    label {
        font-size: 0.7rem;
        letter-spacing: 0.2em;
        color: var(--quicksand);
        margin-bottom: 0.5rem;
    }

    input {
        background: transparent;
        border: none;
        border-bottom: 1px solid var(--quicksand);
        padding: 0.5rem 0;
        color: var(--swan-wing);
        font-family: var(--font-heading);
        font-size: 1.2rem;
        outline: none;
        transition: border-color 0.3s;
    }

    input:focus {
        border-bottom-color: #fff;
    }

    .submit-btn {
        align-self: center;
        background: transparent;
        border: 1px solid var(--quicksand);
        color: var(--quicksand);
        padding: 1rem 3rem;
        font-family: var(--font-heading);
        letter-spacing: 0.2em;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 2rem;
    }

    .submit-btn:hover {
        background: var(--quicksand);
        color: var(--royal-blue);
    }

    /* Footer */
    .footer {
        padding: 4rem;
        text-align: center;
        border-top: 1px solid rgba(224, 197, 143, 0.2);
    }

    .footer-logo {
        font-family: var(--font-heading);
        font-size: 1.5rem;
        letter-spacing: 0.2em;
        margin-bottom: 1rem;
        color: var(--shellstone);
    }

    .copyright {
        font-size: 0.7rem;
        letter-spacing: 0.1em;
        color: var(--sapphire);
    }

    @media (max-width: 768px) {
        .nav {
            flex-direction: column;
            gap: 2rem;
            padding: 2rem;
        }

        .nav-left,
        .nav-right {
            display: none;
        }

        .masked-text {
            font-size: 3rem;
        }

        .form-row {
            flex-direction: column;
            gap: 2rem;
        }

        .fleet-card {
            width: 100%;
        }

        .frame-border {
            display: none;
        }
    }
</style>

<script>
    // Simple Map Animation Trigger
    const paths = document.querySelectorAll(".flight-path");

    const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    paths.forEach((path) => {
                        (path as SVGPathElement).style.animation = "none";
                        (
                            path as SVGPathElement
                        ).getBoundingClientRect(); /* trigger reflow */
                        (path as SVGPathElement).style.animation =
                            "drawLine 3s ease-out forwards";
                    });
                }
            });
        },
        { threshold: 0.5 },
    );

    const mapSection = document.querySelector(".map-section");
    if (mapSection) observer.observe(mapSection);
</script>
